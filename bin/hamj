#!/bin/bash
if [[ -z $HAM_HOME ]]; then
    echo "E/HAM_HOME not set !"
    exit 1
fi
if [[ -z $HAM_TOOLSET ]]; then
    . $HAM_HOME/bin/ham-bash-setenv.sh
    echo "W/HAM_TOOLSET not set, will try to setup the default one..."
    . ham-toolset defaultj
    errcheck $? ham "Can't setup the default java toolset."
fi

# find the _build.ham file
export BUILD_HAM_DIR=`ham-search-build-ham.sh`
if [[ -z $BUILD_HAM_DIR ]]; then
    echo "E/Can't find _build.ham !"
    exit 1
fi
pushd $BUILD_HAM_DIR

$HAM_HOME/bin/$HAM_BIN_LOA/ham $*
